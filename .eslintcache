[{"/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/index.tsx":"1","/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/store/store.ts":"2","/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/router.tsx":"3","/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/store/rootReducer.ts":"4","/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/pages/contact-us.tsx":"5","/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/pages/about-us.tsx":"6","/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/pages/spikes.tsx":"7","/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/pages/home.tsx":"8","/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/contants/index.ts":"9","/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/features/poc/slices/user.ts":"10","/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/features/counter/slices/counter.ts":"11","/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/pages/poc.tsx":"12","/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/pages/dashboard.tsx":"13","/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/hooks/useSlice.ts":"14","/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/components/iframe/custom-site.tsx":"15","/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/common/layout/main.tsx":"16","/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/dummy/index.ts":"17","/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/util/password-data-key.ts":"18","/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/util/symmetric-key.ts":"19","/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/util/helper.ts":"20","/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/features/poc/apis/poc.ts":"21","/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/components/carousel/index.tsx":"22","/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/components/modal/loading.tsx":"23","/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/util/asymmetric-key.ts":"24","/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/components/banner/multiple/index.tsx":"25","/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/components/banner/single/index.tsx":"26","/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/features/user/components/index.tsx":"27","/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/features/user/components/user-listing.tsx":"28","/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/config/api-client.ts":"29","/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/components/carousel/styles.ts":"30","/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/common/style/index.ts":"31","/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/components/footer/index.tsx":"32","/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/components/header/index.tsx":"33","/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/features/user/apis/user-listing.ts":"34","/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/components/skeleton-loader/listing.tsx":"35","/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/config/app-config.ts":"36","/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/components/footer/styles.ts":"37"},{"size":703,"mtime":1616249016190,"results":"38","hashOfConfig":"39"},{"size":536,"mtime":1617869214595,"results":"40","hashOfConfig":"39"},{"size":965,"mtime":1618366162707,"results":"41","hashOfConfig":"39"},{"size":345,"mtime":1618282678143,"results":"42","hashOfConfig":"39"},{"size":810,"mtime":1617861453697,"results":"43","hashOfConfig":"39"},{"size":685,"mtime":1617935653842,"results":"44","hashOfConfig":"39"},{"size":5266,"mtime":1618371262308,"results":"45","hashOfConfig":"39"},{"size":754,"mtime":1617936069082,"results":"46","hashOfConfig":"39"},{"size":1097,"mtime":1618299176263,"results":"47","hashOfConfig":"39"},{"size":1865,"mtime":1618372942208,"results":"48","hashOfConfig":"39"},{"size":924,"mtime":1617950764915,"results":"49","hashOfConfig":"39"},{"size":6006,"mtime":1618538914071,"results":"50","hashOfConfig":"39"},{"size":13923,"mtime":1618469599808,"results":"51","hashOfConfig":"39"},{"size":276,"mtime":1615264576997,"results":"52","hashOfConfig":"39"},{"size":427,"mtime":1617183280944,"results":"53","hashOfConfig":"39"},{"size":653,"mtime":1618223476596,"results":"54","hashOfConfig":"39"},{"size":1581,"mtime":1618285630093,"results":"55","hashOfConfig":"39"},{"size":2148,"mtime":1618396239556,"results":"56","hashOfConfig":"39"},{"size":2228,"mtime":1618469548127,"results":"57","hashOfConfig":"39"},{"size":2398,"mtime":1618392062022,"results":"58","hashOfConfig":"39"},{"size":3486,"mtime":1618465854298,"results":"59","hashOfConfig":"39"},{"size":827,"mtime":1617605884331,"results":"60","hashOfConfig":"39"},{"size":283,"mtime":1618368277908,"results":"61","hashOfConfig":"39"},{"size":3072,"mtime":1618466323377,"results":"62","hashOfConfig":"39"},{"size":750,"mtime":1617608390536,"results":"63","hashOfConfig":"39"},{"size":521,"mtime":1617608396379,"results":"64","hashOfConfig":"39"},{"size":43,"mtime":1615944357692,"results":"65","hashOfConfig":"39"},{"size":763,"mtime":1617605884409,"results":"66","hashOfConfig":"39"},{"size":351,"mtime":1618476886916,"results":"67","hashOfConfig":"39"},{"size":212,"mtime":1617610074377,"results":"68","hashOfConfig":"39"},{"size":224,"mtime":1617954426752,"results":"69","hashOfConfig":"39"},{"size":272,"mtime":1617605855889,"results":"70","hashOfConfig":"39"},{"size":1565,"mtime":1618366305247,"results":"71","hashOfConfig":"39"},{"size":356,"mtime":1615946484361,"results":"72","hashOfConfig":"39"},{"size":335,"mtime":1618224416966,"results":"73","hashOfConfig":"39"},{"size":1168,"mtime":1618194174109,"results":"74","hashOfConfig":"39"},{"size":198,"mtime":1617614165453,"results":"75","hashOfConfig":"39"},{"filePath":"76","messages":"77","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"78"},"18zlb45",{"filePath":"79","messages":"80","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"78"},{"filePath":"81","messages":"82","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"78"},{"filePath":"83","messages":"84","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"78"},{"filePath":"85","messages":"86","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"78"},{"filePath":"87","messages":"88","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"78"},{"filePath":"89","messages":"90","errorCount":0,"warningCount":28,"fixableErrorCount":0,"fixableWarningCount":0,"source":"91","usedDeprecatedRules":"78"},{"filePath":"92","messages":"93","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"78"},{"filePath":"94","messages":"95","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"78"},{"filePath":"96","messages":"97","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"78"},{"filePath":"98","messages":"99","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"78"},{"filePath":"100","messages":"101","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"102"},{"filePath":"103","messages":"104","errorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"105","usedDeprecatedRules":"78"},{"filePath":"106","messages":"107","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"78"},{"filePath":"108","messages":"109","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"110","usedDeprecatedRules":"78"},{"filePath":"111","messages":"112","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"113","usedDeprecatedRules":"78"},{"filePath":"114","messages":"115","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"78"},{"filePath":"116","messages":"117","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"118","usedDeprecatedRules":"78"},{"filePath":"119","messages":"120","errorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"121","usedDeprecatedRules":"78"},{"filePath":"122","messages":"123","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"78"},{"filePath":"124","messages":"125","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"126","usedDeprecatedRules":"78"},{"filePath":"127","messages":"128","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"78"},{"filePath":"129","messages":"130","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"78"},{"filePath":"131","messages":"132","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"78"},{"filePath":"133","messages":"134","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"78"},{"filePath":"135","messages":"136","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"78"},{"filePath":"137","messages":"138","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"78"},{"filePath":"139","messages":"140","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"78"},{"filePath":"141","messages":"142","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"78"},{"filePath":"143","messages":"144","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"78"},{"filePath":"145","messages":"146","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"78"},{"filePath":"147","messages":"148","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"78"},{"filePath":"149","messages":"150","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"78"},{"filePath":"151","messages":"152","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"78"},{"filePath":"153","messages":"154","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"78"},{"filePath":"155","messages":"156","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"157","usedDeprecatedRules":"78"},{"filePath":"158","messages":"159","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"78"},"/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/index.tsx",[],["160","161","162","163","164"],"/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/store/store.ts",[],"/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/router.tsx",[],"/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/store/rootReducer.ts",[],"/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/pages/contact-us.tsx",[],"/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/pages/about-us.tsx",[],"/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/pages/spikes.tsx",["165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192"],"/* eslint-disable react/button-has-type */\n/* eslint-disable @typescript-eslint/dot-notation */\nimport { Document, Page } from 'react-pdf/dist/esm/entry.webpack';\nimport { MainLayout } from 'common/layout/main';\nimport { useEffect, useState } from 'react';\nimport Button from 'react-bootstrap/esm/Button';\nimport {\n  decryptWithCryptoKey,\n  encryptWithCryptoKey,\n  generateAsymmetricKey,\n} from 'util/asymmetric-key';\nimport { CustomIframe } from 'components/iframe/custom-site';\n\nconst pdf = require('../dummy/sample2.pdf');\n\nexport const paramStringToObj = (params) => {\n  const paramsArr = params?.split('?')[1]?.split('&');\n  const obj = {};\n  paramsArr?.forEach((p) => {\n    const [key, val] = p.split('=');\n    obj[key] = val;\n  });\n  return obj;\n};\n\nexport function Spikes(): JSX.Element {\n  const [newNumPages, setNumPages] = useState<number | null>(null);\n  const [pageNumber, setPageNumber] = useState<number>(1);\n  const [asymPubKey, setAsymPubKey] = useState('');\n  const [asymPriKey, setAsymPriKey] = useState('');\n  const [symKey, setSymKey] = useState('');\n  const [symEncryptedKey, setSymEncryptedKey] = useState<string | null>('');\n  const [encryptedFile, setEncryptedFile] = useState<any>('');\n  const [file, setFile] = useState<any>('../dummy/sample.pdf');\n\n  const onMessageReceived = (event) => {\n    if (window.location.origin !== event.origin) {\n      return;\n    }\n    const params = event.data;\n    if (typeof params === 'string') {\n      const obj = paramStringToObj(params);\n      console.log(obj);\n      setAsymPriKey(decodeURIComponent(obj['privateKey']));\n      setAsymPubKey(decodeURIComponent(obj['publicKey']));\n    }\n    console.log('Message from iframe', event);\n  };\n\n  useEffect(() => {\n    window.addEventListener('message', onMessageReceived);\n    return () => window.removeEventListener('message', onMessageReceived);\n  }, []);\n\n  const onFileChange = (event) => {\n    const inputFile = event.target.files[0];\n    // setFile(inputFile);\n\n    const reader = new FileReader();\n\n    reader.readAsArrayBuffer(inputFile);\n\n    reader.onload = async function () {\n      // const arrayBuffer =\n      //   symEncryptedKey && Buffer.from(symEncryptedKey, 'base64');\n      // const decryptedSymKey = await decrypt(asymPriKey, arrayBuffer);\n      // const encryptedData = await encryptS(decryptedSymKey, reader.result);\n      // console.log('encryptedData');\n      // console.log(encryptedData);\n      // const decryptedData = await decryptS(decryptedSymKey, encryptedData);\n      // console.log('onload here again');\n      // console.log(reader.result);\n      // console.log(encryptedData);\n      // setFile(decryptedData);\n    };\n\n    reader.onerror = function () {\n      console.log(reader.error);\n    };\n  };\n\n  function onDocumentLoadSuccess({ numPages }: { numPages: number }) {\n    setNumPages(numPages);\n  }\n  const generateAsymKey = async () => {\n    // const keys = (await generateAsymKeyPair()) as ReturnData;\n    // setAsymPriKey(keys.privateKey);\n    // setAsymPubKey(keys.publicKey);\n  };\n  const generateSymKey = async () => {\n    // const key = await generateSymKeyPair();\n    // setSymKey(key);\n    // // const data = 'final message is the same hello';\n    // console.log(asymPubKey);\n    // const encryptedSymKey = await encrypt(asymPubKey, key);\n    // console.log(encryptedSymKey);\n    // const base64String =\n    //   encryptedSymKey && Buffer.from(encryptedSymKey).toString('base64');\n    // setSymEncryptedKey(base64String);\n    // const arrayBuffer = base64String && Buffer.from(base64String, 'base64');\n    // const decryptedSymKey = await decrypt(asymPriKey, arrayBuffer);\n    // const encryptedData = await encryptS(decryptedSymKey, data);\n    // const decryptedData = await decryptS(decryptedSymKey, encryptedData);\n    // if (decryptedData) {\n    //   console.log(new TextDecoder().decode(decryptedData));\n    // }\n  };\n\n  return (\n    <MainLayout>\n      {/* <Button variant=\"outline-primary\" onClick={generateAsymKey}>\n        Generate Asym keys\n      </Button> */}\n      <Button variant=\"outline-primary\" onClick={generateSymKey}>\n        Generate Sym keys\n      </Button>\n      <div className=\"container mx-auto whitespace-pre-line\">\n        <p className=\"text-purple-600\">Asymmetric public key</p>\n        <br />\n        {asymPubKey}\n      </div>\n      <div className=\"container mx-auto whitespace-pre-line\">\n        <p className=\"text-purple-600\">Asymmetric private key</p>\n        <br />\n        {asymPriKey}\n      </div>\n      <div className=\"container mx-auto whitespace-pre-line\">\n        <p className=\"text-purple-600\">Symmetric key</p>\n        <br />\n        {symKey}\n      </div>\n      <div className=\"container mx-auto whitespace-pre-line\">\n        <p className=\"text-purple-600\">Encrypted Symmetric key</p>\n        <br />\n        {symEncryptedKey}\n      </div>\n      <input onChange={onFileChange} type=\"file\" />\n      <Document file={file} onLoadSuccess={onDocumentLoadSuccess}>\n        <Page pageNumber={pageNumber} />\n      </Document>\n      <p>\n        Page {pageNumber} of {newNumPages}\n      </p>\n      <div className=\"container\">\n        <CustomIframe\n          src=\"http://localhost:8000/\" // MyInfo origin\n          title=\"MyInfo Page\"\n        />\n      </div>\n    </MainLayout>\n  );\n}\n","/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/pages/home.tsx",[],"/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/contants/index.ts",[],"/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/features/poc/slices/user.ts",[],"/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/features/counter/slices/counter.ts",[],"/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/pages/poc.tsx",["193","194"],"/* eslint-disable no-console */\n/* eslint-disable sonarjs/cognitive-complexity */\n/* eslint-disable no-alert */\nimport { MainLayout } from 'common/layout/main';\nimport { QueryKey, Role } from 'contants';\nimport { useQuery } from 'react-query';\nimport { Button, ButtonGroup, Card, Form, ToggleButton } from 'react-bootstrap';\nimport { useEffect, useState } from 'react';\nimport { ILoginResponse, postLoginUser } from 'features/poc/apis/poc';\nimport { useHistory } from 'react-router';\nimport { encryptDataWithPasswordWithScrypt } from 'util/password-data-key';\nimport {\n  exportAsymmetricKeyToPEM,\n  generateAsymmetricKey,\n} from 'util/asymmetric-key';\nimport { generateIV, generateSalt, arrayBufferToBase64 } from 'util/helper';\nimport { AppDispatch } from 'store/store';\nimport { useDispatch } from 'react-redux';\nimport {\n  selectRole,\n  setRole,\n  setSalt,\n  setIV,\n  setUserID,\n  setPublicKey,\n} from 'features/poc/slices/user';\nimport { useAppSelector } from 'hooks/useSlice';\nimport { LoadingClip } from 'components/modal/loading';\n\nexport default function Poc() {\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [encryptedPrivateKeyVal, setEncryptedPrivateKeyVal] = useState('');\n  const [publicKeyVal, setPublicKeyVal] = useState('');\n  const [saltVal, setSaltVal] = useState<Uint8Array>();\n  const [ivVal, setIvVal] = useState<Uint8Array>();\n  const [loadingModal, setLoadingModal] = useState(false);\n  const [goNext, setGoNext] = useState(false);\n  const routerHistory = useHistory();\n  const dispatch = useDispatch<AppDispatch>();\n  const role = useAppSelector(selectRole);\n\n  const radios = [\n    { name: Role.AGENCY, value: Role.AGENCY },\n    { name: Role.PUBLIC, value: Role.PUBLIC },\n  ];\n\n  const setInputPassword = (e: any) => {\n    setPassword(e.currentTarget.value);\n  };\n\n  const setInputUserName = (e: any) => {\n    setUsername(e.currentTarget.value);\n  };\n\n  const { isLoading, isError, refetch } = useQuery<ILoginResponse>(\n    QueryKey.LOGIN,\n    () =>\n      postLoginUser({\n        id: username,\n        salt: arrayBufferToBase64(saltVal!),\n        iv: arrayBufferToBase64(ivVal!),\n        publicKey: publicKeyVal,\n        encryptedPrivateKey: encryptedPrivateKeyVal,\n        role,\n      }),\n    {\n      cacheTime: 10,\n      enabled: false,\n    }\n  );\n  useEffect(() => {\n    if (\n      publicKeyVal &&\n      encryptedPrivateKeyVal &&\n      username &&\n      saltVal &&\n      role &&\n      goNext\n    ) {\n      refetch()\n        .then((res) => {\n          setLoadingModal(false);\n          setGoNext(false);\n          if (res.isError) {\n            window.alert('cannot go forward');\n          } else if (res.isSuccess) {\n            console.log(res.data);\n            // simulate login and sync browser data to backend. if the user exist, it will omit whatever keys that are generated on the browser\n            dispatch(setSalt(res.data.salt));\n            dispatch(setIV(res.data.iv));\n            dispatch(setUserID(res.data.id));\n            dispatch(setPublicKey(res.data.publicKey));\n            routerHistory.push('/dashboard');\n          } else {\n            window.alert('cannot go somewhat');\n          }\n        })\n        .catch((err) => {\n          setLoadingModal(false);\n          setGoNext(false);\n          window.alert(`login failed with error ${err}`);\n        });\n    }\n  }, [publicKeyVal, encryptedPrivateKeyVal, username, saltVal, role, goNext]);\n\n  const validateInput = () => {\n    if (!username || !password || !role) {\n      return false;\n    }\n    return true;\n  };\n\n  const handleLogin = async (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    if (!validateInput()) {\n      window.alert(`Enter required files`);\n      return;\n    }\n    const asymmetricKeyPair = await generateAsymmetricKey();\n    const newSalt = generateSalt();\n    const newIV = generateIV();\n\n    setSaltVal(newSalt);\n    setIvVal(newIV);\n    const asymmetricKeyPEM = await exportAsymmetricKeyToPEM(asymmetricKeyPair!);\n    console.log('asymmetricKeyPEM');\n    console.log(asymmetricKeyPEM.privateKey);\n    const encryptedData = await encryptDataWithPasswordWithScrypt(\n      password,\n      asymmetricKeyPEM.privateKey,\n      newSalt!,\n      newIV!\n    );\n    console.log('encryptedData');\n    console.log(encryptedData);\n    setPublicKeyVal(asymmetricKeyPEM.publicKey);\n    setEncryptedPrivateKeyVal(encryptedData);\n    setLoadingModal(true);\n    setGoNext(true);\n  };\n\n  if (isLoading || loadingModal) {\n    return <LoadingClip loading />;\n  }\n\n  return (\n    <div className=\"w-full flex justify-center my-40\">\n      <Card style={{ width: '18rem' }}>\n        <ButtonGroup toggle>\n          {radios.map((radio, index) => (\n            <ToggleButton\n              key={index}\n              type=\"radio\"\n              name=\"radio\"\n              value={radio.value}\n              checked={role === radio.value}\n              onChange={(e) => dispatch(setRole(e.currentTarget.value))}\n            >\n              {radio.name}\n            </ToggleButton>\n          ))}\n        </ButtonGroup>\n        <Card.Body>\n          <Card.Title>POC Login </Card.Title>\n          <Form onSubmit={handleLogin}>\n            <Form.Group>\n              <Form.Label>Login ID</Form.Label>\n              <Form.Control\n                type=\"text\"\n                placeholder=\"Enter ID\"\n                id=\"username\"\n                onChange={setInputUserName}\n              />\n            </Form.Group>\n\n            <Form.Group>\n              <Form.Label>Password</Form.Label>\n              <Form.Control\n                type=\"password\"\n                placeholder=\"Password\"\n                id=\"password\"\n                onChange={setInputPassword}\n              />\n            </Form.Group>\n            {isError && <p className=\"text-red-500\"> Error Login</p>}\n            <Button variant=\"primary\" type=\"submit\">\n              Login\n            </Button>\n          </Form>\n        </Card.Body>\n      </Card>\n    </div>\n  );\n}\n","/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/pages/dashboard.tsx",["195","196","197","198","199","200"],"/* eslint-disable sonarjs/cognitive-complexity */\n/* eslint-disable no-console */\n/* eslint-disable no-alert */\nimport { MainLayout } from 'common/layout/main';\nimport { Loading } from 'components/skeleton-loader/loading';\nimport { QueryKey, Role } from 'contants';\nimport {\n  addEncryptedDataKey,\n  getAllFiles,\n  getEncryptedDataKey,\n  getEncryptedFile,\n  getUserEncryptedPrivateKey,\n  getUserPublicKeyAndFileDatakey,\n  IFileResponse,\n  uploadEncryptedFile,\n} from 'features/poc/apis/poc';\nimport {\n  selectIV,\n  selectRole,\n  selectSalt,\n  selectUserID,\n  selectPublicKey,\n} from 'features/poc/slices/user';\nimport { useAppSelector } from 'hooks/useSlice';\nimport { useState, useRef } from 'react';\nimport { Button, Card } from 'react-bootstrap';\nimport { useQuery } from 'react-query';\nimport {\n  arrayBufferToBase64,\n  base64StringToArrayBuffer,\n  generateIV,\n} from 'util/helper';\nimport { decryptDataWithPasswordWithScrypt } from 'util/password-data-key';\nimport {\n  decryptWithCryptoKey,\n  encryptWithCryptoKey,\n  importPrivateKey,\n  importPublicKey,\n} from 'util/asymmetric-key';\nimport {\n  generateSymKeyPair,\n  encryptWithSymmetricKey,\n  decryptWithSymmetricKey,\n  importSymmtricKey,\n  exportSymmtricKey,\n} from 'util/symmetric-key';\nimport { LoadingClip } from 'components/modal/loading';\n\nexport interface IFile {\n  id: string;\n  title: string;\n  image: string;\n}\n\nexport default function Dashboard() {\n  const [selectedFile, setSelectedFile] = useState();\n  const hiddenFileInputRef = useRef<HTMLInputElement | null>(null);\n\n  const role = useAppSelector(selectRole);\n  const userid = useAppSelector(selectUserID);\n  const iv = useAppSelector(selectIV);\n  const salt = useAppSelector(selectSalt);\n  const publicKey = useAppSelector(selectPublicKey);\n\n  const { isLoading, isError, data } = useQuery<IFileResponse[]>(\n    QueryKey.ALL_FILE,\n    () => getAllFiles(),\n    {\n      cacheTime: 10,\n    }\n  );\n\n  if (isLoading) {\n    return <LoadingClip loading />;\n  }\n\n  const validateInput = () => {\n    if (!role || !userid || !iv || !salt) {\n      return true;\n    }\n    return true;\n  };\n\n  const handleDownloadAction = async (fileID: string) => {\n    if (!validateInput()) {\n      window.alert(`Missing data`);\n      return;\n    }\n    console.log('Start download');\n    const password = window.prompt('Enter your password');\n\n    // 1. Get user's encrypted private key\n    const { encryptedPrivateKey } = await getUserEncryptedPrivateKey(userid!);\n    console.log('encryptedPrivateKey');\n    console.log(encryptedPrivateKey);\n\n    // 2. Enter password to generate password key with scrypt and decrypt the private key with password key\n    console.log({ encryptedPrivateKey, salt, iv });\n    const saltUint = base64StringToArrayBuffer(salt) as Uint8Array;\n    const ivUint = base64StringToArrayBuffer(iv) as Uint8Array;\n    const privateKeyString = await decryptDataWithPasswordWithScrypt(\n      password!,\n      encryptedPrivateKey,\n      saltUint,\n      ivUint\n    );\n\n    // 3. Import the base64 private key into a CryptoKey\n    const importedPrivateKey = await importPrivateKey(privateKeyString);\n\n    // 4. Get encrypted file\n    const responseData = await getEncryptedFile(fileID);\n\n    // 5. Get encrypted data key and iv with userId and fileId\n    const { key: encryptedDataKey, iv: fileIV } = (\n      await getEncryptedDataKey(fileID, userid)\n    )[0];\n    const fileIvVal = base64StringToArrayBuffer(fileIV) as Uint8Array;\n\n    // 6. Decrypt the encrypted data key with the imported private key\n    const dataKeyInBase64 = await decryptWithCryptoKey(\n      importedPrivateKey!,\n      encryptedDataKey\n    );\n\n    console.log('importedPrivateKey', importedPrivateKey!);\n    console.log('encryptedDataKey', encryptedDataKey);\n\n    // 7. Import the base64 data key into CryptoKey\n    const importedDataKey = await importSymmtricKey(dataKeyInBase64!);\n\n    // 8. Convert the file back to text\n    const dataInBuffer: ArrayBuffer = await responseData.data.arrayBuffer();\n\n    console.log('dataInBuffer');\n    console.log(dataInBuffer);\n\n    // 9. Decrypt the file with the data key and iv\n    const decryptedFile = await decryptWithSymmetricKey(\n      importedDataKey!,\n      dataInBuffer,\n      fileIvVal\n    );\n\n    // 10. Convert the file string back to Blob\n    const dataFile = new File([decryptedFile!], 'lala.pdf', {\n      type: 'application/pdf',\n    });\n\n    console.log('datafile', dataFile);\n    const url = window.URL.createObjectURL(dataFile);\n    const link = document.createElement('a');\n    link.href = url;\n    link.setAttribute('download', 'loli.pdf');\n    document.body.appendChild(link);\n    link.click();\n\n    // console.log('privateKeyString');\n    // console.log(privateKeyString);\n\n    // const fileBlob: Blob = await getEncryptedFile(fileID);\n    // const fileBlobString = await fileBlob.text();\n    // console.log(fileBlob);\n    // const encryptedDataKey = await getEncryptedDataKey(fileID, userid);\n    // const importedPrivateKey = await importPrivateKey(privateKeyString);\n    // const dataKeyString = await decryptWithCryptoKey(\n    //   importedPrivateKey!,\n    //   encryptedDataKey.key\n    // );\n    // const importedDataKey = await importSymmtricKey(dataKeyString!);\n    // const ivDataKey = base64StringToArrayBuffer(\n    //   encryptedDataKey.iv\n    // ) as Uint8Array;\n    // const decryptedFileString = await decryptWithSymmetricKey(\n    //   importedDataKey!,\n    //   fileBlobString,\n    //   ivDataKey\n    // );\n\n    // const decryptedFileBuffer = base64StringToArrayBuffer(decryptedFileString!);\n    // const decryptedBlob = new Blob([new Uint8Array(decryptedFileBuffer)]);\n    // const url = window.URL.createObjectURL(decryptedBlob);\n    // console.log('------url-----------');\n    // console.log(url);\n  };\n\n  const handleShareAction = async (fileID: string) => {\n    if (!validateInput()) {\n      window.alert(`Missing data`);\n      return;\n    }\n    console.log('Start sharing');\n    const receiverId = window.prompt('Enter the userid you want to share to'); // Get the id of user (citizen) to share the file with\n    const password = window.prompt('Enter password'); // Get the agency's password\n    // Get the receiver's public key and file's data key with fileId, userId (agency) and receiver's userId\n    // userId and fileId to get encrypted data key of the file\n    const response = await getUserPublicKeyAndFileDatakey(\n      fileID,\n      userid,\n      receiverId!\n    );\n\n    const saltUint = base64StringToArrayBuffer(salt) as Uint8Array;\n    const ivUint = base64StringToArrayBuffer(iv) as Uint8Array;\n\n    // Get the encrypted private key of the sharer (agency) and decrypt it with the agency's password with scrypt\n    const { encryptedPrivateKey } = await getUserEncryptedPrivateKey(userid!);\n    const plainPrivateKey = await decryptDataWithPasswordWithScrypt(\n      password!,\n      encryptedPrivateKey,\n      saltUint,\n      ivUint\n    );\n\n    // Import the decrypted private key into CryptoKey and decrypt the encrypted data key with it\n    const importedPrivateKey = await importPrivateKey(plainPrivateKey);\n    // const fileIVVal = base64StringToArrayBuffer(response.iv) as Uint8Array;\n    // const dataKey = await decryptWithSymmetricKey(\n    //   importedPrivateKey!,\n    //   response.encryptedDataKey,\n    //   fileIVVal\n    // );\n    const dataKey = await decryptWithCryptoKey(\n      importedPrivateKey!,\n      response.encryptedDataKey\n    );\n\n    console.log('data key before encrypt', dataKey);\n\n    // Encrypt the data key with the receiver's public key to share\n    // const importedPublicKey = await importSymmtricKey(response.publicKey!);\n    const importedPublicKey = await importPublicKey(response.publicKey);\n    const receiverEncryptedDataKey = await encryptWithCryptoKey(\n      importedPublicKey!,\n      dataKey!\n    );\n\n    /**\n     * Test decrypt on the spot\n     */\n    // const {\n    //   encryptedPrivateKey: userEncryptedPrivateKey,\n    // } = await getUserEncryptedPrivateKey('user-2');\n\n    // const userPrivateKeyString = await decryptDataWithPasswordWithScrypt(\n    //   'user-2pw',\n    //   userEncryptedPrivateKey,\n    //   saltUint,\n    //   ivUint\n    // );\n    // console.log('userPrivateKeyString', userPrivateKeyString);\n\n    // const importedUserPrivateKey = await importPrivateKey(userPrivateKeyString);\n    // const dataKeyInBase64 = await decryptWithCryptoKey(\n    //   importedUserPrivateKey!,\n    //   receiverEncryptedDataKey!\n    // );\n    // console.log('datakey after decrypt', dataKeyInBase64);\n\n    /**\n     * End Test\n     */\n\n    const res = await addEncryptedDataKey({\n      encryptedDataKey: receiverEncryptedDataKey!,\n      fileId: fileID,\n      userId: receiverId!,\n      iv: response.iv,\n    });\n\n    console.log('finished sharing');\n    console.log(res);\n  };\n\n  const handleUploadAction = () => {\n    if (!validateInput()) {\n      window.alert(`Missing data`);\n      return;\n    }\n\n    if (hiddenFileInputRef.current !== null) {\n      hiddenFileInputRef.current.click();\n    }\n    console.log('Start uploading');\n  };\n\n  const handleUploadedFile = async (file: File) => {\n    const { name, type } = file;\n\n    const dataIv = generateIV(); // Generate IV\n    const dataKey = (await generateSymKeyPair())!; // Generate data key (symmetric key)\n    const dataInBuffer = await file.arrayBuffer(); // Convert the entire file where contents are interpreted as UTF-8 text\n    // Encrypt the file with data key and iv\n    const encryptedData = (await encryptWithSymmetricKey(\n      dataKey,\n      dataInBuffer,\n      dataIv\n    ))!;\n    console.log('old dataInText', dataInBuffer);\n\n    const importedPublicKey = (await importPublicKey(publicKey))!; // Import the public key into CryptoKey\n    const exportedDataKey = (await exportSymmtricKey(dataKey))!; // Export the data key to be encrypted into base64\n    // Encrypt the data key (base64) withe user's public key\n    const encryptedDataKey = (await encryptWithCryptoKey(\n      importedPublicKey,\n      exportedDataKey\n    )) as string;\n    console.log('userPublicKeyString', publicKey);\n    console.log('data key before encrypt', exportedDataKey);\n\n    /**\n     * Test decrypt on the spot\n     */\n    // const {\n    //   encryptedPrivateKey: userEncryptedPrivateKey,\n    // } = await getUserEncryptedPrivateKey(userid!);\n\n    // const userSaltUint = base64StringToArrayBuffer(salt) as Uint8Array;\n    // const userIvUint = base64StringToArrayBuffer(iv) as Uint8Array;\n    // const userPrivateKeyString = await decryptDataWithPasswordWithScrypt(\n    //   '123123',\n    //   userEncryptedPrivateKey,\n    //   userSaltUint,\n    //   userIvUint\n    // );\n    // console.log('userPrivateKeyString', userPrivateKeyString);\n\n    // const importedUserPrivateKey = await importPrivateKey(userPrivateKeyString);\n    // const dataKeyInBase64 = await decryptWithCryptoKey(\n    //   importedUserPrivateKey!,\n    //   encryptedDataKey!\n    // );\n    // console.log('datakey after decrypt', dataKeyInBase64);\n\n    // // 9. Decrypt the file with the data key and iv\n    // const decryptedFile = await decryptWithSymmetricKey(\n    //   dataKey!,\n    //   encryptedData,\n    //   dataIv\n    // );\n\n    // console.log('new dataInText', decryptedFile);\n\n    // const dataFile = new File([decryptedFile!], 'lala.pdf', {\n    //   type: 'application/pdf',\n    // });\n\n    // const url = window.URL.createObjectURL(dataFile);\n    // const link = document.createElement('a');\n    // link.href = url;\n    // link.setAttribute('download', 'loli.pdf');\n    // document.body.appendChild(link);\n    // link.click();\n\n    // /**\n    //  * End Test\n    //  */\n\n    // Convert the encrypted file (text) back to Blob\n    const encryptedDataBuffer = base64StringToArrayBuffer(encryptedData!);\n    const encryptedDataBlob = new Blob([new Uint8Array(encryptedDataBuffer)]);\n\n    const formData = new FormData();\n    formData.append('file', new File([encryptedDataBlob], name, { type }));\n    formData.append('userId', userid);\n    formData.append('encryptedDataKey', encryptedDataKey);\n    formData.append('iv', arrayBufferToBase64(dataIv));\n    uploadEncryptedFile(formData);\n  };\n\n  const handleFileOnChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (!e.target.files) {\n      return;\n    }\n    console.log('Start file on change');\n    // setSelectedFile(e.target.files[0]);\n    handleUploadedFile(e.target.files[0]);\n  };\n\n  const fileComponents = data!.map((item, index) => (\n    <Card\n      style={{ width: '18rem', marginTop: 5 }}\n      key={`dashboard-card-${index}`}\n    >\n      <Card.Img\n        variant=\"top\"\n        src={\n          item.thumbnailPath ||\n          'https://dummyimage.com/335x333/4ff978/c009e2.png'\n        }\n      />\n      <Card.Body>\n        <Card.Text>{item.name}</Card.Text>\n        <Button variant=\"primary\">\n          {role === Role.AGENCY ? (\n            <Button\n              variant=\"primary\"\n              onClick={() => handleShareAction(item.id)}\n            >\n              share\n            </Button>\n          ) : (\n            <Button\n              variant=\"primary\"\n              onClick={() => handleDownloadAction(item.id)}\n            >\n              download\n            </Button>\n          )}\n        </Button>\n      </Card.Body>\n    </Card>\n  ));\n  return (\n    <MainLayout>\n      {isError && <div>isError</div>}\n      {role === Role.AGENCY && (\n        <>\n          <Button\n            variant=\"primary\"\n            className=\"mt-2\"\n            onClick={handleUploadAction}\n          >\n            Upload Document\n          </Button>\n          <input\n            type=\"file\"\n            ref={hiddenFileInputRef}\n            style={{ display: 'none' }}\n            accept=\"image/*,.pdf,.doc,.docx,.xls,.xlsx\"\n            onChange={handleFileOnChange}\n          />\n        </>\n      )}\n      <div className=\"flex flex-row flex-wrap justify-between\">\n        {fileComponents}\n      </div>\n    </MainLayout>\n  );\n}\n","/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/hooks/useSlice.ts",[],"/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/components/iframe/custom-site.tsx",["201","202","203"],"// eslint-disable-next-line react/prop-types\nexport const CustomIframe = ({ src, title }, ref) => {\n  const onLoadHandler = (event) => {\n    try {\n      const params = event.target.contentWindow.location.search;\n      if (params) {\n        window.postMessage(params, 'http://localhost:3000');\n      }\n    } catch (err) {\n      console.log(err);\n    }\n  };\n  return <iframe src={src} title={title} onLoad={onLoadHandler} />;\n};\n","/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/common/layout/main.tsx",["204","205"],"import { LayoutDiv } from 'common/style';\nimport { AnnouncementBar } from 'components/annoucement-bar';\nimport { Footer } from 'components/footer';\nimport { Header } from 'components/header';\nimport { PropsWithChildren } from 'react';\nimport { FaBeer } from 'react-icons/fa';\n\ntype Props = {\n  showHeader?: boolean;\n};\n\nexport function MainLayout({\n  children,\n  showHeader = true,\n}: PropsWithChildren<Props>) {\n  const iconComponent = <FaBeer />;\n  return (\n    <LayoutDiv>\n      {/* <AnnouncementBar title=\"This is an annoucement\" /> */}\n      {showHeader && <Header icon={iconComponent} />}\n      {children}\n      <Footer />\n    </LayoutDiv>\n  );\n}\n","/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/dummy/index.ts",[],"/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/util/password-data-key.ts",["206","207"],"/* eslint-disable no-console */\nimport { syncScrypt } from 'scrypt-js';\nimport {\n  arrayBufferToBase64,\n  arrayBufferToText,\n  base64StringToArrayBuffer,\n  textToArrayBuffer,\n} from 'util/helper';\n\nconst N = 1024;\nconst r = 8;\nconst p = 1;\nconst dkLen = 32;\n\nconst ALGORITHM = 'AES-GCM';\nconst SHA = 'SHA-256';\n\nexport const encryptDataWithPasswordWithScrypt = async (\n  password: string,\n  data: string,\n  salt: Uint8Array,\n  iv: Uint8Array\n): Promise<string> => {\n  try {\n    const dataBuffer = textToArrayBuffer(data);\n    const passwordBuffer = textToArrayBuffer(password) as Uint8Array;\n    console.log('old salt');\n    console.log(salt);\n    const scryptKeyString = syncScrypt(passwordBuffer, salt, N, r, p, dkLen);\n    const key = await crypto.subtle.importKey(\n      'raw',\n      scryptKeyString,\n      {\n        name: ALGORITHM,\n      },\n      true,\n      ['encrypt', 'decrypt']\n    );\n    const cipherData = await window.crypto.subtle.encrypt(\n      {\n        name: ALGORITHM,\n        iv,\n      },\n      key,\n      dataBuffer\n    );\n    return arrayBufferToBase64(cipherData);\n  } catch (e) {\n    console.log(`Error occur while encryting data ${e}`);\n  }\n  return 'error';\n};\n\nexport const decryptDataWithPasswordWithScrypt = async (\n  password: string,\n  cipherData: string,\n  salt: Uint8Array,\n  iv: Uint8Array\n): Promise<string> => {\n  try {\n    const passwordBuffer = textToArrayBuffer(password) as Uint8Array;\n    const cipherDataBuffer = base64StringToArrayBuffer(cipherData);\n    console.log('cipherDataBuffer');\n    console.log(cipherData);\n    const scryptKeyString = syncScrypt(passwordBuffer, salt, N, r, p, dkLen);\n    const key = await crypto.subtle.importKey(\n      'raw',\n      scryptKeyString,\n      {\n        name: ALGORITHM,\n      },\n      true,\n      ['encrypt', 'decrypt']\n    );\n    console.log('--------------decrypting---------');\n    const data = await window.crypto.subtle.decrypt(\n      {\n        name: ALGORITHM,\n        iv,\n      },\n      key,\n      cipherDataBuffer\n    );\n    return arrayBufferToText(data);\n  } catch (e) {\n    console.log(`Error occur while decrypting data ${e}`);\n  }\n  return 'error';\n};\n","/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/util/symmetric-key.ts",["208","209","210","211","212","213","214","215","216"],"import {\n  arrayBufferToBase64,\n  arrayBufferToText,\n  base64StringToArrayBuffer,\n} from 'util/helper';\n\nconst ALGORITHM = 'AES-GCM';\n\nexport const generateSymKeyPair = async (): Promise<CryptoKey | null> => {\n  try {\n    return await window.crypto.subtle.generateKey(\n      {\n        name: ALGORITHM,\n        length: 256,\n      },\n      true,\n      ['encrypt', 'decrypt']\n    );\n  } catch (e) {\n    console.log(`Error occur while generating sym key ${e}`);\n  }\n  return null;\n};\n\nexport const exportSymmtricKey = async (\n  key: CryptoKey\n): Promise<string | null> => {\n  try {\n    const exported = await window.crypto.subtle.exportKey('raw', key);\n    const exportedKeyBuffer = new Uint8Array(exported);\n    return Buffer.from(exportedKeyBuffer).toString('base64');\n  } catch (e) {\n    console.log(`Error occur while exporting sym key ${e}`);\n  }\n  return null;\n};\n\nexport const importSymmtricKey = async (\n  keyString: string\n): Promise<CryptoKey | null> => {\n  try {\n    const myBuffer = Buffer.from(keyString, 'base64');\n    return await window.crypto.subtle.importKey(\n      'raw',\n      myBuffer,\n      ALGORITHM,\n      true,\n      ['encrypt', 'decrypt']\n    );\n  } catch (e) {\n    console.log(`Error occur while exporting sym key ${e}`);\n  }\n  return null;\n};\n\nexport const encryptWithSymmetricKey = async (\n  key: CryptoKey,\n  data: ArrayBuffer,\n  iv: Uint8Array\n): Promise<string | null> => {\n  try {\n    // The iv must never be reused with a given key.\n    const cipherData = await window.crypto.subtle.encrypt(\n      {\n        name: ALGORITHM,\n        iv,\n      },\n      key,\n      data\n    );\n    return arrayBufferToBase64(cipherData);\n  } catch (err) {\n    console.log(`Error occur while encrypting with sym key ${err}`);\n  }\n  return null;\n};\n\nexport const decryptWithSymmetricKey = async (\n  key: CryptoKey,\n  cipherData: ArrayBuffer,\n  iv: Uint8Array\n): Promise<ArrayBuffer | null> => {\n  try {\n    // const cipherDataBuffer = base64StringToArrayBuffer(cipherData);\n    return await window.crypto.subtle.decrypt(\n      {\n        name: ALGORITHM,\n        iv,\n      },\n      key,\n      cipherData\n    );\n  } catch (err) {\n    console.log(`Error occur while encrypting with sym key ${err}`);\n  }\n  return null;\n};\n","/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/util/helper.ts",[],"/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/features/poc/apis/poc.ts",["217","218","219","220"],"import { apiServerCLient } from 'config/api-client';\nimport { String } from 'lodash';\n\nexport interface ILoginInput {\n  id: string;\n  salt: string;\n  iv: string;\n  publicKey: string;\n  encryptedPrivateKey: string;\n  role: string;\n}\n\nexport interface ILoginResponse {\n  id: string;\n  iv: string;\n  salt: string;\n  role: string;\n  encryptedPrivateKey: string;\n  publicKey: string;\n}\n\nexport interface IAddKeyInput {\n  userId: string;\n  fileId: string;\n  encryptedDataKey: string;\n  iv: string;\n}\n\nexport interface IAddKeyResponse {\n  key: string;\n  createdAt: string;\n  updatedAt: string;\n  id: number;\n}\n\n// API-1\nexport const addEncryptedDataKey = async (\n  input: IAddKeyInput\n): Promise<IAddKeyResponse> => {\n  return apiServerCLient.post('/user/add-key', input).then((response) => {\n    return response.data.data;\n  });\n};\n\nexport interface IUploadFileInput {\n  userId: string;\n  file: File;\n  encryptedDataKey: string;\n}\n\nexport interface IUploadFileResponse {\n  name: string;\n  id: number;\n}\n\n// API-2\nexport const uploadEncryptedFile = async (\n  input: FormData\n): Promise<IUploadFileResponse> => {\n  return apiServerCLient\n    .post('/user/file', input, {\n      headers: {\n        'content-type': 'multipart/form-data',\n      },\n    })\n    .then((response) => {\n      return response.data.data;\n    });\n};\n\nexport interface IFileResponse {\n  createdAt: string;\n  updatedAt: string;\n  id: string;\n  name: string;\n  thumbnailPath: string;\n}\n\n// API-3\nexport const getAllFiles = async (): Promise<IFileResponse[]> => {\n  return apiServerCLient.get('/file/all').then((response) => {\n    console.log('---------');\n    console.log(response.data.data);\n    return response.data.data;\n  });\n};\n\nexport interface IUserResponse {\n  createdAt: string;\n  updatedAt: string;\n  id: string;\n  salt: string;\n  iv: string;\n  publicKey: string;\n  encryptedPrivateKey: string;\n  role: string;\n}\n\n// API-4\nexport const getUserEncryptedPrivateKey = async (\n  input: string\n): Promise<IUserResponse> => {\n  return apiServerCLient.get(`/user/${input}`).then((response) => {\n    return response.data.data;\n  });\n};\n\nexport interface IDownloadFile {\n  fileid: string;\n  userid: string;\n  signedFileName: string;\n}\n\n// API-5\nexport const getEncryptedFile = async (fileId: string): Promise<any> => {\n  return apiServerCLient\n    .get(`/file/${fileId}`, {\n      responseType: 'blob',\n    })\n    .then((response) => {\n      return response;\n    });\n};\n\ninterface IUserPublicKeyAndFileDatakeyResponse {\n  encryptedDataKey: string;\n  publicKey: string;\n  iv: string;\n}\n// API-6\nexport const getUserPublicKeyAndFileDatakey = async (\n  fileId: string,\n  userId: string,\n  receiverId: string\n): Promise<IUserPublicKeyAndFileDatakeyResponse> => {\n  return apiServerCLient\n    .get(\n      `/user/share-file?fileId=${fileId}&sharerId=${userId}&receiverId=${receiverId}`\n    )\n    .then((response) => {\n      return response.data.data;\n    });\n};\n\n// API-7\nexport const postLoginUser = async (\n  input: ILoginInput\n): Promise<ILoginResponse> => {\n  return apiServerCLient.post('/user', input).then((response) => {\n    return response.data.data;\n  });\n};\n\ninterface IEncryptedDataKeyResponse {\n  id: string;\n  key: string;\n  iv: string;\n}\n\n// API-8\nexport const getEncryptedDataKey = async (\n  fileId: string,\n  userId = ''\n): Promise<IEncryptedDataKeyResponse> => {\n  return apiServerCLient\n    .get(`/user/key?fileId=${fileId}&userId=${userId}`)\n    .then((response) => {\n      return response.data.data;\n    });\n};\n","/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/components/carousel/index.tsx",[],"/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/components/modal/loading.tsx",[],"/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/util/asymmetric-key.ts",[],"/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/components/banner/multiple/index.tsx",[],"/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/components/banner/single/index.tsx",[],"/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/features/user/components/index.tsx",[],"/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/features/user/components/user-listing.tsx",[],"/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/config/api-client.ts",[],"/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/components/carousel/styles.ts",[],"/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/common/style/index.ts",[],"/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/components/footer/index.tsx",[],"/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/components/header/index.tsx",[],"/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/features/user/apis/user-listing.ts",[],"/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/components/skeleton-loader/listing.tsx",[],"/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/config/app-config.ts",["221","222"],"import * as _ from 'lodash';\n\nexport function getValueFromEnv(\n  key: string,\n  defaultValue: string,\n  disableWarrning = false\n): string {\n  // eslint-disable-next-line security/detect-object-injection\n  const value = process.env[key] || defaultValue;\n  if ((_.isNil(value) || value.length === 0) && !disableWarrning) {\n    console.log(`Configuration key not found or empty: ${key}`);\n  }\n  return value;\n}\n\nexport function getIntValueFromEnv(\n  key: string,\n  defaultValue?: number,\n  disableWarrning = false\n): number | undefined {\n  const stringValue = getValueFromEnv(key, '', disableWarrning);\n  if (_.isNil(stringValue)) {\n    return defaultValue;\n  }\n\n  const intValue = parseInt(stringValue, 10);\n  if (Number.isNaN(intValue)) {\n    if (!disableWarrning) {\n      console.log(\n        `Configuration ${key} is not a valid integer: ${stringValue}`\n      );\n    }\n    return defaultValue;\n  }\n\n  return intValue;\n}\n\nexport const config = {\n  baseUrl: getValueFromEnv('REACT_APP_BASE_URL', 'https://localhost.com'),\n  dummyAPIId: getValueFromEnv('REACT_APP_DUMMPY_API_ID', '123'),\n  serverUrl: getValueFromEnv('REACT_APP_SERVER_URL', 'https://localhost.com'),\n};\n","/Users/yangmacpro/Documents/Govtech/ProjectFileSG/filesg-frontend/src/components/footer/styles.ts",[],{"ruleId":"223","replacedBy":"224"},{"ruleId":"225","replacedBy":"226"},{"ruleId":"227","replacedBy":"228"},{"ruleId":"229","replacedBy":"230"},{"ruleId":"231","replacedBy":"232"},{"ruleId":"233","severity":1,"message":"234","line":8,"column":3,"nodeType":"235","messageId":"236","endLine":8,"endColumn":23},{"ruleId":"237","severity":1,"message":"234","line":8,"column":3,"nodeType":"235","messageId":"236","endLine":8,"endColumn":23},{"ruleId":"233","severity":1,"message":"238","line":9,"column":3,"nodeType":"235","messageId":"236","endLine":9,"endColumn":23},{"ruleId":"237","severity":1,"message":"238","line":9,"column":3,"nodeType":"235","messageId":"236","endLine":9,"endColumn":23},{"ruleId":"233","severity":1,"message":"239","line":10,"column":3,"nodeType":"235","messageId":"236","endLine":10,"endColumn":24},{"ruleId":"237","severity":1,"message":"239","line":10,"column":3,"nodeType":"235","messageId":"236","endLine":10,"endColumn":24},{"ruleId":"233","severity":1,"message":"240","line":14,"column":7,"nodeType":"235","messageId":"236","endLine":14,"endColumn":10},{"ruleId":"237","severity":1,"message":"240","line":14,"column":7,"nodeType":"235","messageId":"236","endLine":14,"endColumn":10},{"ruleId":"241","severity":1,"message":"242","line":21,"column":5,"nodeType":"243","endLine":21,"endColumn":13},{"ruleId":"233","severity":1,"message":"244","line":28,"column":22,"nodeType":"235","messageId":"236","endLine":28,"endColumn":35},{"ruleId":"237","severity":1,"message":"244","line":28,"column":22,"nodeType":"235","messageId":"236","endLine":28,"endColumn":35},{"ruleId":"233","severity":1,"message":"245","line":31,"column":18,"nodeType":"235","messageId":"236","endLine":31,"endColumn":27},{"ruleId":"237","severity":1,"message":"245","line":31,"column":18,"nodeType":"235","messageId":"236","endLine":31,"endColumn":27},{"ruleId":"233","severity":1,"message":"246","line":32,"column":27,"nodeType":"235","messageId":"236","endLine":32,"endColumn":45},{"ruleId":"237","severity":1,"message":"246","line":32,"column":27,"nodeType":"235","messageId":"236","endLine":32,"endColumn":45},{"ruleId":"233","severity":1,"message":"247","line":33,"column":10,"nodeType":"235","messageId":"236","endLine":33,"endColumn":23},{"ruleId":"237","severity":1,"message":"247","line":33,"column":10,"nodeType":"235","messageId":"236","endLine":33,"endColumn":23},{"ruleId":"233","severity":1,"message":"248","line":33,"column":25,"nodeType":"235","messageId":"236","endLine":33,"endColumn":41},{"ruleId":"237","severity":1,"message":"248","line":33,"column":25,"nodeType":"235","messageId":"236","endLine":33,"endColumn":41},{"ruleId":"233","severity":1,"message":"249","line":34,"column":16,"nodeType":"235","messageId":"236","endLine":34,"endColumn":23},{"ruleId":"237","severity":1,"message":"249","line":34,"column":16,"nodeType":"235","messageId":"236","endLine":34,"endColumn":23},{"ruleId":"250","severity":1,"message":"251","line":43,"column":7,"nodeType":"243","messageId":"252","endLine":43,"endColumn":18},{"ruleId":"250","severity":1,"message":"251","line":47,"column":5,"nodeType":"243","messageId":"252","endLine":47,"endColumn":16},{"ruleId":"253","severity":1,"message":"254","line":63,"column":21,"nodeType":"255","messageId":"256","endLine":63,"endColumn":36},{"ruleId":"253","severity":1,"message":"257","line":77,"column":22,"nodeType":"255","messageId":"256","endLine":77,"endColumn":31},{"ruleId":"250","severity":1,"message":"251","line":78,"column":7,"nodeType":"243","messageId":"252","endLine":78,"endColumn":18},{"ruleId":"233","severity":1,"message":"258","line":85,"column":9,"nodeType":"235","messageId":"236","endLine":85,"endColumn":24},{"ruleId":"237","severity":1,"message":"258","line":85,"column":9,"nodeType":"235","messageId":"236","endLine":85,"endColumn":24},{"ruleId":"233","severity":1,"message":"259","line":4,"column":10,"nodeType":"235","messageId":"236","endLine":4,"endColumn":20},{"ruleId":"237","severity":1,"message":"259","line":4,"column":10,"nodeType":"235","messageId":"236","endLine":4,"endColumn":20},{"ruleId":"233","severity":1,"message":"260","line":5,"column":10,"nodeType":"235","messageId":"236","endLine":5,"endColumn":17},{"ruleId":"237","severity":1,"message":"260","line":5,"column":10,"nodeType":"235","messageId":"236","endLine":5,"endColumn":17},{"ruleId":"233","severity":1,"message":"261","line":56,"column":10,"nodeType":"235","messageId":"236","endLine":56,"endColumn":22},{"ruleId":"237","severity":1,"message":"261","line":56,"column":10,"nodeType":"235","messageId":"236","endLine":56,"endColumn":22},{"ruleId":"233","severity":1,"message":"262","line":56,"column":24,"nodeType":"235","messageId":"236","endLine":56,"endColumn":39},{"ruleId":"237","severity":1,"message":"262","line":56,"column":24,"nodeType":"235","messageId":"236","endLine":56,"endColumn":39},{"ruleId":"233","severity":1,"message":"263","line":2,"column":46,"nodeType":"235","messageId":"236","endLine":2,"endColumn":49},{"ruleId":"237","severity":1,"message":"263","line":2,"column":46,"nodeType":"235","messageId":"236","endLine":2,"endColumn":49},{"ruleId":"250","severity":1,"message":"251","line":10,"column":7,"nodeType":"243","messageId":"252","endLine":10,"endColumn":18},{"ruleId":"233","severity":1,"message":"264","line":2,"column":10,"nodeType":"235","messageId":"236","endLine":2,"endColumn":25},{"ruleId":"237","severity":1,"message":"264","line":2,"column":10,"nodeType":"235","messageId":"236","endLine":2,"endColumn":25},{"ruleId":"233","severity":1,"message":"265","line":16,"column":7,"nodeType":"235","messageId":"236","endLine":16,"endColumn":10},{"ruleId":"237","severity":1,"message":"265","line":16,"column":7,"nodeType":"235","messageId":"236","endLine":16,"endColumn":10},{"ruleId":"233","severity":1,"message":"266","line":3,"column":3,"nodeType":"235","messageId":"236","endLine":3,"endColumn":20},{"ruleId":"237","severity":1,"message":"266","line":3,"column":3,"nodeType":"235","messageId":"236","endLine":3,"endColumn":20},{"ruleId":"233","severity":1,"message":"267","line":4,"column":3,"nodeType":"235","messageId":"236","endLine":4,"endColumn":28},{"ruleId":"237","severity":1,"message":"267","line":4,"column":3,"nodeType":"235","messageId":"236","endLine":4,"endColumn":28},{"ruleId":"250","severity":1,"message":"251","line":20,"column":5,"nodeType":"243","messageId":"252","endLine":20,"endColumn":16},{"ruleId":"250","severity":1,"message":"251","line":33,"column":5,"nodeType":"243","messageId":"252","endLine":33,"endColumn":16},{"ruleId":"250","severity":1,"message":"251","line":51,"column":5,"nodeType":"243","messageId":"252","endLine":51,"endColumn":16},{"ruleId":"250","severity":1,"message":"251","line":73,"column":5,"nodeType":"243","messageId":"252","endLine":73,"endColumn":16},{"ruleId":"250","severity":1,"message":"251","line":94,"column":5,"nodeType":"243","messageId":"252","endLine":94,"endColumn":16},{"ruleId":"233","severity":1,"message":"268","line":2,"column":10,"nodeType":"235","messageId":"236","endLine":2,"endColumn":16},{"ruleId":"237","severity":1,"message":"268","line":2,"column":10,"nodeType":"235","messageId":"236","endLine":2,"endColumn":16},{"ruleId":"250","severity":1,"message":"251","line":82,"column":5,"nodeType":"243","messageId":"252","endLine":82,"endColumn":16},{"ruleId":"250","severity":1,"message":"251","line":83,"column":5,"nodeType":"243","messageId":"252","endLine":83,"endColumn":16},{"ruleId":"250","severity":1,"message":"251","line":11,"column":5,"nodeType":"243","messageId":"252","endLine":11,"endColumn":16},{"ruleId":"250","severity":1,"message":"251","line":29,"column":7,"nodeType":"243","messageId":"252","endLine":29,"endColumn":18},"lines-around-directive",["269"],"global-require",[],"no-buffer-constructor",[],"no-new-require",[],"no-path-concat",[],"no-unused-vars","'decryptWithCryptoKey' is defined but never used.","Identifier","unusedVar","@typescript-eslint/no-unused-vars","'encryptWithCryptoKey' is defined but never used.","'generateAsymmetricKey' is defined but never used.","'pdf' is assigned a value but never used.","security/detect-object-injection","Generic Object Injection Sink","MemberExpression","'setPageNumber' is assigned a value but never used.","'setSymKey' is assigned a value but never used.","'setSymEncryptedKey' is assigned a value but never used.","'encryptedFile' is assigned a value but never used.","'setEncryptedFile' is assigned a value but never used.","'setFile' is assigned a value but never used.","no-console","Unexpected console statement.","unexpected","func-names","Unexpected unnamed async function.","FunctionExpression","unnamed","Unexpected unnamed function.","'generateAsymKey' is assigned a value but never used.","'MainLayout' is defined but never used.","'Loading' is defined but never used.","'selectedFile' is assigned a value but never used.","'setSelectedFile' is assigned a value but never used.","'ref' is defined but never used.","'AnnouncementBar' is defined but never used.","'SHA' is assigned a value but never used.","'arrayBufferToText' is defined but never used.","'base64StringToArrayBuffer' is defined but never used.","'String' is defined but never used.","padding-line-between-statements"]
